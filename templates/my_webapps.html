{% extends "base.html" %}
{% block content %}
<div class="panel">
  <div class="d-flex justify-content-between align-items-center">
    <h3>My Added Web-Apps</h3>
    <a class="btn btn-primary" href="{{ url_for('add_webapp') }}">Add Another</a>
  </div>

  {% if apps %}
    <div class="mt-3">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>ID</th>
            <th>File</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for app in apps %}
            <tr>
              <td>{{ app.id }}</td>
              <td>{{ app.filename }}</td>
              <td>
                {% if app.locked %}
                  <span class="badge bg-warning text-dark">Locked</span>
                {% else %}
                  <span class="badge bg-secondary">No image password</span>
                {% endif %}
              </td>
              <td>
                <a class="btn btn-success btn-sm" href="{{ url_for('open_webapp', app_id=app.id) }}" target="_blank">Open</a>
                <a class="btn btn-outline-primary btn-sm ms-1" href="{{ url_for('set_image_password', app_id=app.id) }}">Set / Update</a>
                <a class="btn btn-outline-info btn-sm ms-1" href="{{ url_for('forgot_image_password', app_id=app.id) }}">Forgot</a>
                <a class="btn btn-danger btn-sm ms-1" href="{{ url_for('delete_webapp', app_id=app.id) }}" onclick="return confirm('Delete this web-app?');">Delete</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="muted mt-3">No web-apps added yet.</p>
  {% endif %}
</div>
{% endblock %}
